{% extends "base.html" %}

{% block head %}
{% load static %}
<link href="{% static 'tinymce/css/prism.css' %}" rel="stylesheet">
{% endblock head %}


{% block content %}
<div class="container-fluid no-gutters justify-content-center d-flex ps-0 pe-0 h-100 text-light">
    <div class="col-xxl-5 col-xl-6 col-lg-7 col-md-8 col-sm-11 col-11 d-flex flex-column align-items-left">
        <!-- Page header -->
        <h2 class="text-light text-center m-5">{{ server.title }}</h2>
        <hr class="border border-light border-3 opacity-75 w-100 mt-0">
            <p class="text-light">{{ server.game }}</p>
            <!-- Thumbnail-->
            <div class="col-12 p-1 position-relative overflow-hidden d-flex flex-wrap mb-3 justify-content-center">
                {% if images.0.image %}
                <img style="max-width: 100%; max-height: 50vh;" src=" {{ images.0.image }}"
                    alt="Image uploaded by for listing owner.">
                {% else %}
                <div class="no-gutter d-flex flex-column justify-content-center text-bg-secondary opacity-75"
                    style="width: 100%; height: 20vh;">
                    <p class="mb-1 text-center" style="font-size: xxx-large;"><i class="bi bi-camera"></i></p>
                    <p class="mb-1 text-center" style="font-size: xx-large;">Awaiting Image</p>
                </div>
                {% endif %}
            </div>
            <p class="text-light mb-3">Tags:
                {% for tag in server.tags.all %}
                <span class="tag rounded-end text-light me-1 p-1">{{ tag }}</span>
                {% endfor %}
            </p>
            <a class="btn btn-discord text-light mb-3" href="https://discord.com/invite/{{ server.discord }}"
                target="_blank" title="Link to discord server"><i class="fab fa-discord"></i> Join the discord
                server</a>
            {% if server.id in bumps_queryset %}
            <button type="button" class="btn btn-success mb-3" disabled name="" data-item="{{ server.pk }}"
                data-name='Bump Button'>Already bumped!</button>
            {% elif bumps_queryset|length > 4 %}
            <button type="button" class="btn btn-warning mb-3" disabled name="" data-item="{{ server.pk }}"
                data-name='Bump Button'>No more bumps!</button>
            {% else %}
            <button type="button" class="btn btn-primary mb-3" name="" data-item="{{ server.pk }}"
                data-name='Bump Button'>Bump this server</button>
            {% endif %}
            <p class="text-light">{{ server.short_description|safe }}</p>
            <p class="text-light">{{ server.long_description|safe }}</p>
    </div>
</div>
{%endblock%}
{% block scripts %}
<!-- Scripts specific for this page -->
<script src="{% static 'tinymce/js/prism.js' %}"></script>
<script src="../static/js/script_bumps.js"></script>
{% endblock %}